<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Inventory Dashboard</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;700&display=swap" rel="stylesheet">
  <style>
    body, html {
      margin: 0; padding: 0; height: 100%; width: 100%;
      font-family: 'Roboto', sans-serif;
    }
    header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      background: #e6e6e6;
      padding: 10px 20px;
      height: 80px;
      border-bottom: 1px solid #ccc;
    }
    .header-right {
      text-align: right;
    }
    .toggle-btn {
      font-size: 24px;
      background: #007bff;
      color: white;
      padding: 6px 12px;
      border: none;
      cursor: pointer;
      border-radius: 5px;
      width: 40px;
      height: 36px;
      display: flex;
      align-items: center;
      justify-content: center;
    }
    .container {
      display: flex; height: calc(100vh - 80px);
    }
    .sidebar {
      width: 250px;
      background: #fff;
      border-right: 1px solid #ccc;
      display: flex;
      flex-direction: column;
      justify-content: space-between;
      transition: width 0.3s;
    }
    .sidebar.hidden {
      display: none;
    }
    .submenu {
      display: none;
      padding-left: 20px;
      list-style: none;
    }
    .submenu li {
      padding: 5px 0;
      cursor: pointer;
    }
    .sidebar h2 {
      margin: 0; padding: 10px;
      background: #f0f0f0;
      cursor: pointer;
    }
    .user-panel {
      padding: 10px;
      font-size: 12px;
      border-top: 1px solid #ccc;
      text-align: center;
    }
    .user-panel img {
      width: 60px; height: 60px; border-radius: 50%;
      margin-bottom: 10px;
    }
    .logout-btn {
      margin: 10px;
      padding: 8px;
      background: #dc3545;
      color: white;
      border: none;
      cursor: pointer;
      border-radius: 5px;
    }
    .main-content {
      flex: 1;
      overflow-y: auto;
      padding: 20px;
    }
    input, button, textarea {
      display: block;
      margin: 10px 0;
      padding: 8px;
      width: 100%;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    table, th, td {
      border: 1px solid black;
      text-align: center;
    }
    .btn-row {
      display: flex;
      gap: 10px;
    }
  </style>
</head>
<body onload="initDashboard()">
  <header>
    <button class="toggle-btn" onclick="toggleSidebar()">‚ò∞</button>
    <div class="header-right">
      <div><strong>Inventory Management System</strong></div>
      <div>Quick Product Search üîç</div>
    </div>
  </header>

  <div class="container">
    <div class="sidebar" id="sidebar">
      <div>
        <h2 onclick="toggleMenu('fileMenu')">My Files</h2>
        <ul class="submenu" id="fileMenu">
          <li onclick="showSection('itemMaster')">Item Master</li>
          <li>Location Master</li>
          <li>Supplier Master</li>
          <li onclick="showSection('myStock')">My Stock</li>
        </ul>
        <h2 onclick="toggleMenu('transactionMenu')">My Transactions</h2>
        <ul class="submenu" id="transactionMenu">
          <li onclick="showSection('purchaseOrder')">PO</li>
          <li onclick="showSection('grnSection')">GRN</li>
          <li>PRN</li>
          <li>Transfer In</li>
          <li>Transfer Out</li>
        </ul>
        <h2 onclick="toggleMenu('reportMenu')">My Reports</h2>
        <ul class="submenu" id="reportMenu">
          <li>Bin Card</li>
          <li>Stock Balance Report</li>
          <li>Sale</li>
          <li>Transaction</li>
        </ul>
      </div>
      <div class="user-panel">
        <img src="user.png" alt="User" />
        <p><strong>User:</strong> <span id="userName"></span></p>
        <p><strong>Location:</strong> <span id="userLocation"></span></p>
        <button class="logout-btn" onclick="logout()">Logout</button>
      </div>
    </div>

    <div class="main-content">
      <div id="itemMaster" style="display:none;">
        <h2>Item Master</h2>
        <input type="text" id="itemCode" placeholder="Item Code">
        <input type="text" id="itemName" placeholder="Item Name">
        <input type="text" id="packSize" placeholder="Pack Size">
        <input type="number" id="costPrice" placeholder="Cost Price">
        <input type="number" id="sellPrice" placeholder="Selling Price">
        <input type="text" id="supplierName" placeholder="Supplier Name">
        <div class="btn-row">
          <button onclick="createItem()">Create</button>
          <button onclick="editItem()">Edit</button>
          <button onclick="saveItem()">Save</button>
          <button onclick="deleteItem()">Delete</button>
        </div>
      </div>
    </div>
  </div>

<script>
let itemDB = JSON.parse(localStorage.getItem("itemDB") || "{}");
let nextItemCode = 1;

function initDashboard() {
  const user = localStorage.getItem("username") || "User";
  const location = localStorage.getItem("location") || "WarehouseA";
  document.getElementById("userName").textContent = user;
  document.getElementById("userLocation").textContent = location;
  document.getElementById("itemCode").addEventListener("keypress", function(e) {
    if (e.key === "Enter") loadItem();
  });
}

function toggleSidebar() {
  document.getElementById("sidebar").classList.toggle("hidden");
}
function toggleMenu(id) {
  const el = document.getElementById(id);
  el.style.display = el.style.display === "block" ? "none" : "block";
}
function showSection(id) {
  document.querySelectorAll(".main-content > div").forEach(div => div.style.display = "none");
  document.getElementById(id).style.display = "block";
}
function logout() {
  localStorage.clear();
  window.location.href = 'index.html';
}

function createItem() {
  let code = String(nextItemCode++);
  itemDB[code] = getItemFormData();
  localStorage.setItem("itemDB", JSON.stringify(itemDB));
  document.getElementById("itemCode").value = code;
  clearItemForm(true);
  alert("Item created: " + code);
}

function loadItem() {
  const code = document.getElementById("itemCode").value;
  const item = itemDB[code];
  if (!item) return alert("Item not found");
  document.getElementById("itemName").value = item.name;
  document.getElementById("packSize").value = item.ps;
  document.getElementById("costPrice").value = item.cost;
  document.getElementById("sellPrice").value = item.sell;
  document.getElementById("supplierName").value = item.supplier;
}

function editItem() {
  ["itemName", "packSize", "costPrice", "sellPrice", "supplierName"].forEach(id => {
    document.getElementById(id).readOnly = false;
  });
}

function saveItem() {
  const code = document.getElementById("itemCode").value;
  if (!itemDB[code]) return alert("Item not found");
  itemDB[code] = getItemFormData();
  localStorage.setItem("itemDB", JSON.stringify(itemDB));
  alert("Item updated");
}

function deleteItem() {
  const code = document.getElementById("itemCode").value;
  if (!itemDB[code]) return alert("Item not found");
  delete itemDB[code];
  localStorage.setItem("itemDB", JSON.stringify(itemDB));
  clearItemForm();
  document.getElementById("itemCode").value = "";
  alert("Item deleted");
}

function getItemFormData() {
  return {
    name: document.getElementById("itemName").value,
    ps: document.getElementById("packSize").value,
    cost: document.getElementById("costPrice").value,
    sell: document.getElementById("sellPrice").value,
    supplier: document.getElementById("supplierName").value
  };
}

function clearItemForm(keepCode = false) {
  if (!keepCode) document.getElementById("itemCode").value = "";
  ["itemName", "packSize", "costPrice", "sellPrice", "supplierName"].forEach(id => {
    document.getElementById(id).value = "";
  });
}
</script>
</body>
</html>
